# Linux常用命令

## Linux命令的格式

Linux命令的语法并不复杂

```
命令 [选项] [参数] 
command [options] [arguments]
```

在命令行中，命令相当于英语的动词，选项相当于英语的形容词，参数相当于英语的名词，而整个命令就相当于英语的语句。

## 基础命令

`who`  可以知道目前有哪些用户在系统上工作

`w`     使用`w`命令所获得的信息要比`who`命令多一些

`users`   可以知道目前有哪些用户登录了Linux系统

`date`    用于显示系统当前的信息

`cal`     是calendar的前3个字符，用来显示某月的日历

`su`      切换用户(switch user)，ubuntu服务器上是用`sudo su`这条命令切换到root用户

也可以使用`su [用户名]`来从root用户切换回普通用户

`passwd`   可以使用该命令修改密码

`whatis`   该命令可以显示所查询命令的简单说明，例如`whatis ls`

`--help`   注意是在命令之后使用该选项，例如`ls --help`，该选项可以用于绝大多数Linux命令，但不是所有的命令，`--help`选项显示命令的简要说明和选项列表



+ 一个关键的命令`man`  是manual的前三个字母

`man [<option | number>]  <command | filename >`

option是要显示的关键字；number是要显示的章节号，command是要了解的命令，filename为文件名

在Linux中每一个命令都有相对应的说明文件，而这些说明文件就叫做**`Man Pages` **，man pages 中有像书一样的结构，其内容分为不同的章节。所有Man Pages 的集合就成为Linux的操作说明，该手册提供了每一个Linux命令的详细描述和使用方法。

## 1. 目录和文件管理命令

ls -a  查看该级目录里面所有的文件   

### 1.1 目录处理命令

#### 目录处理命令： mkdir  
命令英文原意： make directories  

命令所在路径： /bin/mkdir  

执行权限： 所有用户  

语法： mkdir -p[目录名]  

功能描述： 创建新目录  

不能在不存在的目录下面创建子目录  

` mkdir /tmp/study/math `   会报错，因为没有/study目录，所以不能创建/math  

` mkdir -p /tmp/study/math `  这样就不会报错，因为加上 -p 之后可以递归创建  

使用命令行可以同时创建两个目录  

` mkdir /tmp/study/math /tmp/study/computer `   

#### 目录处理命令   cd   
命令英文原意： change directory    

命令所在路径： shell内置命令    

语法： cd\[目录\]    

使用这个命令可以进入任意一个目录，注意需要使用完整目录    

有一个问题是进入此目录后只能显示当前最近一级目录    

使用 **pwd** 就可以显示当前目录的绝对路径    

` cd .. ` 回到上一级目录，注意cd后面要加上空格    

#### 删除空目录：  rmdir
remove empty directory  

rmdir 目录名称  

注意只能删除空目录  

#### 复制文件或者目录：  cp
即copy  

命令所在路径： /bin/cp  

语法：  cp -rp 原文件或目录  目标目录  

​		-r  复制目录  

​		-p  保留文件属性  

也可以同时添加多个目录名称，同时复制  

复制的时候可以同时改名  

#### 剪切文件、改名  mv
原意： move  

语法： mv 原文件或目录  目标目录  

而且可以省略当前目录

#### 删除文件或目录 `rm -rf 文件夹名称`

+ Linux ` rm ` 命令用于删除一个文件或者目录。

+ 语法：` rm [options] name... `

+ 参数：`-i ` 删除前逐一询问确认；`-f` 即使原档案属性设为唯读，亦直接删除，无需逐一确认；`-r ` 将目录及以下之档案亦逐一删除。

+ **删除文件可以直接使用`rm`命令，若删除目录则必须配合选项`-r`**

```
例如：# rm  -r  homework  rm：是否删除 目录 "homework"? y 
```

+ 删除当前目录下的所有文件及目录，命令行为：`rm  -r  *` 

+ 文件一旦通过rm命令删除，则无法恢复，所以必须格外小心地使用该命令。

----------------------------------------------------
### 1.2 文件管理命令

#### 创建新文件 touch

在当前目录下创建文件     `touch +文件名 ` 

在某个特定的目录下创建文件 `touch+绝对路径+文件名`    

注意Windows中文件名很多符号是不能使用的，但是在Linux中除了`/`这个表示根目录之外，都是可以使用的，但是并不建议这样做，因为很容易自己搞不清楚

注意Linux中空格不建议作为文件名，因为空格作为命令之间的间隔符，如果使用双引号的话，以后会很麻烦

#### 显示文件内容 cat

功能描述：显示文件内容

​					加上`-n`显示行号

示例：`cat /etc/issue`

​			`cat -n /etc/services`   可以在文件中加入行号

#### 分页显示文件命令 more

如果文件内容过多，使用`more` 进行分页显示

此时使用`空格`可以进入下一页显示

按`Enter`可以换行

使用`q`即可退出

#### 分页显示文件命令 less

语法： `less [文件名]`

功能描述： `空格` `Enter` `q` 和`more`命令是一样的

​					但是`Pageup` 或者 上箭头可以向上翻页

​					在显示内容时`/`+关键词 就可以查找你想要查找的内容

#### 显示文件前面几行： head

语法： `head [文件名] `

功能描述：显示文件前面几行

​					加上`-n`	显示行数

范例： `head -n 20 /etc/services`

#### 显示文件后面几行: tail

语法: `tail [文件名]`

功能描述： 显示文件后面几行

​					-n 指定行数

​					-f 动态显示文件末尾内容

范例：`tail -n /ect/services`

### 1.3 文件处理命令 ->链接管理

命令名称：`ln`

命令英文原意：`link`

语法：`ln -s [原文件] [目标文件]`

​			`-s` 创建软链接，不加`s`是硬链接

功能描述： 生成链接文件

#### 软链接 ln -s [原文件] [目标文件]

软链接特征：

+ lrwxrwxrwx  权限有源文件决定，所以软链接本身是所有权限
+ 文件大小 -只是符号链接，所以很小
+ /tmp/issue.soft ->  /etc/issue 箭头指向源文件

1. 使用`ls -l`命令显示的第一个表示文件类型，`-`表示是一个文件,`d`表示是一个目录directory， `l`则表示是一个链接文件link, 而且在Linux系统里面，把用户分成三类，这三类用户分别是`所有者`，`所属组`，`其他人`,这三种分别拥有三种权限`可读r` `可写w` `可执行x` 

2. 使用`ls -l 软链接`

   显示软链接文件的详细信息，出现`lrwxrwxrwx`其中`l`表示这是一个软链接文件，三个`rwx`表示所有人都有权限，为什么呢，因为它的权限是由它链接的文件来决定的

3. 如何理解软链接呢？ ->理解为windows的快捷方式，Linux使用软链接较多，就像windows使用快捷方式较多一样

#### 硬链接文件 ls [原文件] [目标文件]

硬链接特征：

硬链接是**实时拷贝**，相当于复制`cp`，但是源文件改变，硬链接文件也会同步改变

## 2. 权限管理命令 chmod

Linux把用户分成三类

u 所有者：谁创建了这个文件，只有一个

g 所属组：定义一组用户对这个文件有什么操作权限，所属组只能有一个

o 其他人：其他两个之外

Linux的权限也分成三类，分别是`r` `w` `x` ，对应着`读` `写` `执行` 

如何更改权限呢？  ->chmod命令

#### 权限管理命令 chmod

**谁有更改文件的权限？**只有两个，一是【该文件的所有者】，一个是超级用户【root】

命令名称： chmod

命令英文原意： **ch**ange the permissions **mod**e of a file

执行权限：所有用户

语法： chmod [{ugoa}{+-=}{rwx}] [文件或目录]

​			[mode=421] [文件或目录]

​			-R 递归修改

功能描述： 改变文件或目录权限

#### 其他权限管理命令



## 3. 文件搜索命令

### 3.1 文件搜索命令 `find`

命令所在路径： `find`

语法： ` find [搜索范围] [匹配条件] `

功能： 文件搜索

注意find较为消耗资源，所以不要在服务器在非常繁忙的时候使用`find`命令，而且范围越小越好

#### 根据不同参数 不同的查找方式

+  根据文件名查找 ` find /etc -name init`   

  在目录/etc中查找文件`init`

  注意Linux是严格区分大小写的`-iname`不区分大小写

  可以使用通配符来进行`精确搜索`或者`模糊搜索`

  使用`*`匹配任意字符  `*init*`表示所有名字中含有`init`的文件

  使用`?`匹配单个字符`init???`可以匹配像`inittab`这样的文件

+ 根据文件大小查找  `find / -size +204800`

  Linux系统中`一个数据块`=`512字节`=`0.5k`

  容易得到 100MB = 102400KB = 204800数据块，所以上面例子中是`+204800`

  `+n` 大于 `-n`小于 `n`等于

+ 根据**所有者**查找 `find /home -user Gray`

+ 根据时间属性查找 `find /etc -cmin -5`

  在/etc下查找5分钟内被修改过属性的文件和目录

  `-amin` 访问时间 access

  `-cmin` 文件属性 change

  `-mmin` 文件内容 modify

+ 根据文件类型查找 `-type`

  f  文件   d 目录  l 软链接文件

  `-inum` 根据i节点查找



#### 条件查找

+ `find /etc -size +163840 -a -size -204800`   

这条命令表示 在/etc下查找大于80MB小于100MB的文件

`-a` 两个条件同时满足

`-o` 两个条件满足任意一个即可



+ `find /etc -name init -exec ls -l {} \; `

  在/etc下查找init文件并显示其详细信息

  
#### 根据find查找命令对文件进行  筛选删除

find 是一个命令行实用程序，允许您根据给定的表达式搜索文件和目录，并对每个匹配的文件或目录执行操作。

具体不介绍，可以百度，下面是一个例子

`例如，要删除当前工作目录中所有以 _cache 结尾的目录，请运行：

```
find . -type d -name '*_cache' -exec rm -r {} +
```

`.` 递归搜索当前工作目录(.)
`-type d`  将搜索限制为目录
`-name '*_cache'`  仅搜索以 _cache 结尾的目录
`-exec` 执行带有可选参数的外部命令，在这种情况下是 rm -r 
`{} +` 将找到的文件追加到 rm 命令的末尾



### 3.2 文件搜索命令 `locate`

语法 ： `locate 文件名`

功能描述： 在文件资料库中查找文件

范例： `locate inittab` 

一个问题，由于locate是在资料库中寻找，所以并不能找到实时文件，解决办法是`updatedb`更新资料库再去查找，就可以了

### 3.3 查找命令 which

语法： `which 命令`

功能： 搜索命令所在目录及别名信息

范例： `which ls`

### 3.4 搜索命令所在路径 whereis

语法： `whereis [命令名称] `

功能描述： 搜索命令所在目录及帮助文档路径

范例： `where ls`

### 3.5 在文件内容中进行搜索 grep

语法： `grep -iv [指定字符] [文件] `

功能描述： 在**文件中**搜寻并输出 **匹配的字符所在行** 

​					`-i` 不区分大小写

​					`-v` 排除指定字符串  屏蔽所查找字符串所在的行

## 4. 帮助命令  man 

命令英文原意：manual（手册的意思）

语法： `man [命令或配置文件] `

功能描述：获得帮助信息

命令很多，不可能记住所有的命令，所以使用 `man`命令查看文档手册非常重要

可能命令文件和配置文件同名，比如`password`，这时候 1 表示命令文件， 5 表示配置文件

`man 1 password` 就是查看password这个命令文件而不是配置文件

#### 查看内置帮助命令 help

语法 ： `help [命令] `

帮助查看shell内置命令（找不到所在目录的命令称为内置命令），man不能查看内置命令，需要使用help这个命令来查看
